(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2665:(e,t,r)=>{Promise.resolve().then(r.bind(r,4604))},4604:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var a=r(5155),s=r(2115),l=r(534);let n={site:{favicon:"/favicon.ico",analytics:"",metadata:{title:"个人导航站",description:"Personal Navigation Hub",author:"User",language:"zh-CN",keywords:"导航, 个人, 服务, 管理"}},appearance:{theme:{auto:!0,default:"light"},background:{type:"bing",value:"today",blur:0,opacity:.8},card:{blur:10,opacity:.1}},layout:{pinned:[],groups:[]},export:{markdown:{template:"## {tag}\n\n{items}",item_format:"- [{title}]({url}) - {description}"}},items:[]};async function i(){try{var e,t,r,a,s,i,o,c,d;let u=await fetch("/config/site.yaml");if(!u.ok)throw Error("配置文件加载失败: ".concat(u.status));let h=await u.text(),m=l.Ay.load(h);if(!m||"object"!=typeof m)throw Error("配置文件格式错误");return{site:{...n.site,...m.site,metadata:{...null==(e=n.site)?void 0:e.metadata,...null==(t=m.site)?void 0:t.metadata}},appearance:{theme:{...n.appearance.theme,...null==(r=m.appearance)?void 0:r.theme},background:{...n.appearance.background,...null==(a=m.appearance)?void 0:a.background},card:{...n.appearance.card,...null==(s=m.appearance)?void 0:s.card}},layout:{pinned:(null==(i=m.layout)?void 0:i.pinned)||n.layout.pinned,groups:(null==(o=m.layout)?void 0:o.groups)||n.layout.groups,pinnedTags:(null==(c=m.layout)?void 0:c.pinnedTags)||[],typeGroups:(null==(d=m.layout)?void 0:d.typeGroups)||{}},export:{...n.export,...m.export},items:m.items||[]}}catch(e){return console.error("配置加载失败，使用默认配置:",e),{...n,items:[]}}}class o{static getState(){try{let e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):{}}catch(e){return{}}}static setState(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(e){console.error("保存清单状态失败:",e)}}static toggleItem(e,t){let r=this.getState();r[e]||(r[e]={}),r[e][t]=!r[e][t],this.setState(r)}static isCompleted(e,t){var r;return(null==(r=this.getState()[e])?void 0:r[t])||!1}static getProgress(e,t,r){let a=Object.values(this.getState()[e]||{}).filter(Boolean).length;return r?{completed:a,total:r.filter(e=>!e.isHeader).length}:{completed:a,total:t}}}o.STORAGE_KEY="homepage-checklist-state";class c{static getStatus(e){return this.checks.get(e)||{id:e,status:"unknown",lastChecked:new Date}}static async checkService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"http",r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;try{if("tcp"===t&&r&&a){let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{return await fetch("http://".concat(r,":").concat(a),{method:"HEAD",mode:"no-cors",signal:e.signal}),clearTimeout(t),"online"}catch(e){if(e instanceof TypeError&&e.message.includes("CORS"))return clearTimeout(t),"online";return clearTimeout(t),"offline"}}{let t=new AbortController,r=setTimeout(()=>t.abort(),5e3);return await fetch(e,{method:"HEAD",mode:"no-cors",signal:t.signal}),clearTimeout(r),"online"}}catch(e){return"offline"}}static startChecking(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"http",a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:60;this.stopChecking(e),this.performCheck(e,t,r,a,s);let n=window.setInterval(()=>{this.performCheck(e,t,r,a,s)},1e3*l);this.intervals.set(e,n)}static stopChecking(e){let t=this.intervals.get(e);t&&(window.clearInterval(t),this.intervals.delete(e))}static async performCheck(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"http",a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;this.checks.set(e,{id:e,status:"checking",lastChecked:new Date});let l=Date.now(),n=await this.checkService(t,r,a,s),i=Date.now()-l;this.checks.set(e,{id:e,status:n,lastChecked:new Date,responseTime:i})}}c.checks=new Map,c.intervals=new Map;var d=r(7280);function u(e){let{config:t}=e,{theme:r}=(0,d.D)(),[l,n]=(0,s.useState)(""),[i,o]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{m(!0)},[]),(0,s.useEffect)(()=>{let e=async()=>{let e="";switch(u(!1),t.type){case"bing":e="https://bing.img.run/1920x1080.php";break;case"url":case"image":e=t.value;break;case"color":o(!0);return;default:u(!0),o(!0);return}if(e){let t=new Image;t.onload=()=>{n(e),o(!0)},t.onerror=()=>{console.error("图片加载失败:",e),u(!0),o(!0)},t.src=e}else u(!0),o(!0)};h&&e()},[t,h]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 transition-opacity duration-1000",style:{...c?"dark"===r?{background:"linear-gradient(-45deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)"}:{background:"linear-gradient(-45deg, #667eea 0%, #764ba2 100%)"}:"color"===t.type?{backgroundColor:t.value}:l?{backgroundImage:"url(".concat(l,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:"dark"===r?{background:"linear-gradient(-45deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)"}:{background:"linear-gradient(-45deg, #667eea 0%, #764ba2 100%)"},opacity:+!!i}}),(0,a.jsx)("div",{className:"fixed inset-0 transition-all duration-500",style:(()=>{let e=1-t.opacity;return{backgroundColor:"dark"===r?"rgba(0, 0, 0, ".concat(e+.2,")"):"rgba(0, 0, 0, ".concat(e,")"),backdropFilter:t.blur>0?"blur(".concat(t.blur,"px)"):"none"}})()}),!i&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-gray-800 via-gray-900 to-black animate-pulse"})]})}var h=r(3509),m=r(2098),x=r(9099),p=r(4869),g=r(3786),f=r(6766);function v(e){let{icon:t,title:r,url:l,itemType:n,size:i=32,className:o=""}=e,[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)([]),[m,x]=(0,s.useState)(0);(0,s.useEffect)(()=>{d(!1),h([]),x(0)},[t,l]);let p=("website"===n||"service"===n)&&l&&!t,g=e=>e.startsWith("http")||e.startsWith("/")||e.startsWith("data:")?e:"/icons/".concat(e),v=p?{type:"favicon",value:void 0}:t?"string"==typeof t?{type:"auto",value:g(t)}:"emoji"===t.type||"text"===t.type?t:{...t,value:t.value?g(t.value):t.value}:void 0,y=e=>{try{let t=new URL(e),r=t.hostname,a=t.origin;return["".concat(a,"/favicon.ico"),"https://icon.horse/icon/".concat(r),"https://www.google.com/s2/favicons?domain=".concat(r,"&sz=32"),"".concat(a,"/apple-touch-icon.png"),"".concat(a,"/favicon.png")]}catch(e){return[]}},b=e=>{let{badge:t}=e;if(!t)return"";let a=t.style||"flat",s=encodeURIComponent(t.label||""),l=encodeURIComponent(t.message||r),n=t.color||"blue",i=t.labelColor||"lightgrey",o=t.logo||"",c="https://img.shields.io/badge/".concat(s);s&&l?c+="-".concat(l):l&&(c="https://img.shields.io/badge/".concat(l)),c+="-".concat(n);let d=new URLSearchParams;"flat"!==a&&d.append("style",a),"lightgrey"!==i&&d.append("labelColor",i),o&&d.append("logo",o);let u=d.toString();return u?"".concat(c,"?").concat(u):c},j=e=>(0,a.jsx)("div",{className:"flex items-center justify-center rounded-lg bg-gradient-to-br from-blue-400 to-purple-500 ".concat(o),style:{width:i,height:i,fontSize:.5*i},children:e}),w=e=>c||!e?k():(0,a.jsx)(f.default,{src:e,alt:r||"Icon",width:i,height:i,className:"rounded-lg object-cover ".concat(o)}),N=e=>{let t=e?e.charAt(0).toUpperCase():r.charAt(0).toUpperCase();return(0,a.jsx)("div",{className:"flex items-center justify-center rounded-lg bg-gradient-to-br from-blue-400 to-purple-500 text-white font-semibold ".concat(o),style:{width:i,height:i,fontSize:.4*i},children:t})},k=()=>{if(null==v?void 0:v.fallback)switch(v.fallback.type){case"emoji":return j(v.fallback.value);case"text":return N(v.fallback.value)}return N(r.charAt(0).toUpperCase())};if(!v)return k();switch(v.type){case"emoji":return j(v.value||"\uD83D\uDCC4");case"auto":case"path":case"url":return w(v.value||"");case"favicon":if(!l||c)return k();let C="";if(u.length>0&&m<u.length)C=u[m];else if(null==v?void 0:v.value)C=v.value;else{let e=y(l);e.length>0&&(C=e[0],h(e),x(0))}return C?(0,a.jsx)(f.default,{src:C,alt:r||"Favicon",width:i,height:i,className:"rounded-lg object-cover ".concat(o)}):k();case"svg":return(null==v?void 0:v.svg)?(0,a.jsx)("div",{className:"".concat(o," flex items-center justify-center"),dangerouslySetInnerHTML:{__html:v.svg}}):(null==v?void 0:v.value)?w(v.value):k();case"badge":let S=b(v);return!S||c?k():(0,a.jsx)(f.default,{src:S,alt:r,className:"rounded ".concat(o),style:{height:.6*i,maxWidth:2*i}});case"text":return N(v.value||r.charAt(0));default:return k()}}function y(e){var t;let{siteConfig:r}=e,{theme:l,toggleTheme:n}=(0,d.D)(),[i,o]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{o(!0)},[]),(0,a.jsx)("header",{className:"relative z-20 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[(0,a.jsxs)("div",{className:"flex-1 mb-4 sm:mb-0 flex items-center",children:[r.avatar&&(0,a.jsx)("div",{className:"mr-4 flex-shrink-0",children:(0,a.jsx)(f.default,{src:r.avatar,alt:"Avatar",width:48,height:48,className:"rounded-full",priority:!0})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-1",style:{color:"var(--text-primary)"},children:r.title}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center",children:[r.description&&(0,a.jsx)("p",{className:"text-xs sm:text-sm mr-2",style:{color:"var(--text-secondary)"},children:r.description}),r.links?(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[r.links.github&&(0,a.jsx)("a",{href:r.links.github,target:"_blank",rel:"noopener noreferrer",className:"text-white/70 hover:text-white transition-colors",title:"GitHub",children:(0,a.jsx)(x.A,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),r.links.blog&&(0,a.jsx)("a",{href:r.links.blog,target:"_blank",rel:"noopener noreferrer",className:"text-white/70 hover:text-white transition-colors",title:"博客",children:(0,a.jsx)(p.A,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),null==(t=r.links.custom)?void 0:t.map((e,t)=>(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-white/70 hover:text-white transition-colors",title:e.name,children:e.icon?(0,a.jsx)(v,{icon:e.icon,title:e.name,url:e.url,size:20,className:"w-4 h-4 sm:w-5 sm:h-5"}):(0,a.jsx)(g.A,{className:"w-3 h-3 sm:w-4 sm:h-4"})},t))]}):null]})]})]}),(0,a.jsx)("div",{className:"hidden md:flex items-center gap-3",children:(0,a.jsx)("button",{onClick:n,className:i?"p-3 rounded-xl backdrop-blur-[10px] border transition-all h-12 w-12 flex items-center justify-center":"p-3 rounded-xl backdrop-blur-[10px] border transition-all bg-white/10 border-white/20 h-12 w-12 flex items-center justify-center",title:"dark"===l?"切换到浅色主题":"切换到深色主题",children:"dark"===l?(0,a.jsx)(h.A,{className:"w-5 h-5"}):(0,a.jsx)(m.A,{className:"w-5 h-5"})})})]})})}var b=r(7924),j=r(6932);function w(e){let{items:t,config:r,onFilter:l,onSearchChange:n,onTagsChange:i}=e,[o,c]=(0,s.useState)(""),[d,u]=(0,s.useState)([]),[h,m]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e=Array.from(new Set(t.flatMap(e=>e.tags)));if((null==r?void 0:r.layout.pinnedTags)&&r.layout.pinnedTags.length>0){let t=r.layout.pinnedTags;m([...e.filter(e=>t.includes(e)).sort((e,r)=>t.indexOf(e)-t.indexOf(r)),...e.filter(e=>!t.includes(e)).sort()])}else m(e.sort())},[t,r]),(0,s.useEffect)(()=>{let e=t;if(o.trim()){let t=o.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.tags.some(e=>e.toLowerCase().includes(t)))}d.length>0&&(e=e.filter(e=>d.some(t=>e.tags.includes(t)))),l(e)},[o,d,t,l]),(0,s.useEffect)(()=>{n&&n(o)},[o,n]),(0,s.useEffect)(()=>{i&&i(d)},[d,i]);let x=e=>{u(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,a.jsxs)("div",{className:"apple-card p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(b.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4",style:{color:"var(--text-tertiary)"}}),(0,a.jsx)("input",{type:"text",placeholder:"搜索网站、服务或清单...",value:o,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-white/30 focus:border-transparent",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-secondary)",color:"var(--text-primary)",borderWidth:"1px",borderStyle:"solid"}})]}),(o||d.length>0)&&(0,a.jsx)("button",{onClick:()=>{c(""),u([])},className:"px-4 py-3 bg-red-500/20 hover:bg-red-500/30 text-red-200 rounded-xl transition-all",children:"清除"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm",style:{color:"var(--text-secondary)"},children:[(0,a.jsx)(j.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"标签:"})]}),h.map(e=>{var s;let l=d.includes(e),n=null==r||null==(s=r.layout.pinnedTags)?void 0:s.includes(e),i=t.filter(t=>t.tags.includes(e)).length;return(0,a.jsxs)("button",{onClick:()=>x(e),className:"px-3 py-1.5 rounded-lg text-sm transition-all",style:{backgroundColor:l?"var(--bg-hover)":"var(--bg-secondary)",color:l?"var(--text-primary)":"var(--text-secondary)",borderWidth:"1px",borderStyle:"solid",borderColor:l?"var(--border-primary)":n?"var(--border-secondary)":"transparent"},children:[e,(0,a.jsxs)("span",{className:"ml-1 text-xs opacity-60",children:["(",i,")"]})]},e)})]}),(o||d.length>0)&&(0,a.jsxs)("div",{className:"mt-3 text-sm",style:{color:"var(--text-tertiary)"},children:[o&&(0,a.jsxs)("span",{children:['搜索: "',o,'" ']}),d.length>0&&(0,a.jsxs)("span",{children:["标签: ",d.join(", ")]})]})]})}var N=r(3453),k=r(4861),C=r(4186),S=r(142),E=r(6516);function T(e){let{item:t,onOpenChecklist:r,onOpenSharedList:l,className:n=""}=e,{theme:i}=(0,d.D)(),[u,h]=(0,s.useState)(!1),[m,x]=s.useState("unknown"),[p,g]=s.useState({completed:0,total:0});(0,s.useEffect)(()=>{h(!0)},[]),(0,s.useEffect)(()=>{"checklist"===t.type&&t.items&&g(o.getProgress(t.id,t.items.length,t.items))},[t]),(0,s.useEffect)(()=>{if("service"===t.type){let e=()=>{x(c.getStatus(t.id).status)};e();let r=setInterval(e,3e4);return()=>clearInterval(r)}},[t]);let f=()=>{if("checklist"===t.type){if(t.items)return"".concat(p.completed,"/").concat(p.total)}else if("sharedlist"===t.type&&t.items)return"".concat(t.items.length," 个链接");return null},y=u?"apple-card ".concat(n):"".concat("group relative backdrop-blur-[10px] rounded-xl transition-all duration-300 cursor-pointer"," bg-white/10 border border-white/20 ").concat(n);return(0,a.jsx)("div",{className:y,onClick:()=>{if("checklist"===t.type&&r)r(t);else if("sharedlist"===t.type&&l)l(t);else if("website"===t.type||"service"===t.type){let e="url"in t?t.url:void 0;e&&window.open(e,"_blank")}},"data-theme":u?i:void 0,children:(0,a.jsxs)("div",{className:"p-6 h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center mb-3",children:[(0,a.jsx)("div",{className:"mr-3",children:(0,a.jsx)(v,{icon:t.icon,title:t.title,url:(e=>{if("url"in e)return e.url})(t),itemType:t.type,size:32})}),(0,a.jsx)("h3",{className:"text-white font-medium text-sm flex-grow",style:{color:"var(--text-primary)"},children:t.title}),(0,a.jsxs)("div",{className:"ml-2",children:[(()=>{if("service"!==t.type)return null;switch(m){case"online":return(0,a.jsx)(N.A,{className:"w-4 h-4 text-green-500"});case"offline":return(0,a.jsx)(k.A,{className:"w-4 h-4 text-red-500"});case"checking":return(0,a.jsx)(C.A,{className:"w-4 h-4 text-yellow-500 animate-spin"});default:return null}})(),"checklist"===t.type&&(0,a.jsx)(S.A,{className:"w-4 h-4 text-white/60 mt-1",style:{color:"var(--text-tertiary)"}}),"sharedlist"===t.type&&(0,a.jsx)(E.A,{className:"w-4 h-4 text-white/60 mt-1",style:{color:"var(--text-tertiary)"}})]})]}),(0,a.jsx)("p",{className:"text-xs leading-relaxed flex-1 mb-4",style:{color:"var(--text-secondary)"},children:t.description}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1.5 mt-auto",children:[t.tags.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-md",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)"},children:e},t)),f()&&(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-md ml-auto",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)"},children:f()})]})]})})}function A(e){let{items:t,onOpenChecklist:r,onOpenSharedList:l,className:n="",config:i}=e;s.useEffect(()=>{(null==i?void 0:i.layout.typeGroups)&&console.log("ItemGrid接收到的typeGroups配置:",i.layout.typeGroups)},[i]);let o=s.useMemo(()=>{let e=Array.from(new Set(t.map(e=>e.type))),r={};return e.forEach(e=>{let a=e,s=999;(null==i?void 0:i.layout.typeGroups)&&e in i.layout.typeGroups&&(a=i.layout.typeGroups[e].title||a,s=i.layout.typeGroups[e].priority||s),r[e]={title:a,priority:s,items:t.filter(t=>t.type===e)}}),r},[t,i]);if(0===t.length)return(0,a.jsxs)("div",{className:"text-center text-white/60 py-12",children:[(0,a.jsx)("p",{className:"text-lg mb-2",children:"没有找到匹配的项目"}),(0,a.jsx)("p",{className:"text-sm",children:"尝试调整搜索条件或检查配置文件"})]});let c=Object.keys(o).sort((e,t)=>o[e].priority-o[t].priority);return(0,a.jsx)("div",{className:"space-y-8",children:c.map(e=>(console.log("渲染类型 ".concat(e,", 标题: ").concat(o[e].title)),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-medium mb-4 px-2",style:{color:"var(--text-primary)"},children:o[e].title}),(0,a.jsx)("div",{className:"\n              grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 \n              gap-4 auto-rows-fr ".concat(n,"\n            "),children:o[e].items.map(e=>(0,a.jsx)(T,{item:e,onOpenChecklist:r,onOpenSharedList:l},e.id))})]},e)))})}var L=r(1788),I=r(4416),_=r(5196);function z(e){let{item:t,onClose:r}=e,[l,n]=(0,s.useState)({});(0,s.useEffect)(()=>{t&&n(o.getState()[t.id]||{})},[t]);let i=()=>{r()},c=e=>{if(!t)return;let r=t.items.find(t=>t.id===e);null!=r&&r.isHeader||(o.toggleItem(t.id,e),n(o.getState()[t.id]||{}))},d=async()=>{if(!t)return;let e=t.items.filter(e=>!e.isHeader),r=t.items.filter(e=>!e.isHeader&&l[e.id]),a=t.items.filter(e=>!e.isHeader&&!l[e.id]),s="# ".concat(t.title,"\n\n").concat(t.description,"\n\n## 已完成 (").concat(r.length,"/").concat(e.length,")\n\n").concat(r.map(e=>{let t=e.indent||0,r="  ".repeat(t);return e.isHeader?"".concat(r,"### ").concat(e.text):"".concat(r,"- [x] ").concat(e.text)}).join("\n"),"\n\n## 待完成 (").concat(a.length,"/").concat(e.length,")\n\n").concat(a.map(e=>{let t=e.indent||0,r="  ".repeat(t);return e.isHeader?"".concat(r,"### ").concat(e.text):"".concat(r,"- [ ] ").concat(e.text)}).join("\n"),"\n\n---\n导出时间: ").concat(new Date().toLocaleString(),"\n");try{await navigator.clipboard.writeText(s);let e=document.createElement("div");e.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg z-50",e.textContent="已复制到剪贴板",document.body.appendChild(e),setTimeout(()=>{e.classList.add("opacity-0"),e.style.transition="opacity 0.5s ease",setTimeout(()=>document.body.removeChild(e),500)},2e3)}catch(t){console.error("复制到剪贴板失败:",t);let e=document.createElement("div");e.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-4 py-2 rounded-lg z-50",e.textContent="复制失败，请手动复制",document.body.appendChild(e),setTimeout(()=>{e.classList.add("opacity-0"),e.style.transition="opacity 0.5s ease",setTimeout(()=>document.body.removeChild(e),500)},2e3)}};if(!t)return null;let u=(()=>{if(!t)return{completed:0,total:0,percentage:0};let e=t.items.filter(e=>!e.isHeader),r=e.filter(e=>l[e.id]).length,a=e.length,s=a>0?Math.round(r/a*100):0;return{completed:r,total:a,percentage:s}})();return(0,a.jsxs)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"fixed inset-0",onClick:i}),(0,a.jsxs)("div",{className:"relative bg-white/10 dark:bg-white/5 backdrop-blur-[20px] border border-white/20 dark:border-white/10 rounded-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:t.title}),(0,a.jsx)("p",{className:"text-white/70 text-sm mb-3",children:t.description}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex-1 bg-white/10 rounded-full h-2 overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 transition-all duration-300",style:{width:"".concat(u.percentage,"%")}})}),(0,a.jsxs)("span",{className:"text-white/80 text-sm font-medium min-w-fit",children:[u.completed,"/",u.total]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,a.jsx)("button",{onClick:d,className:"p-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-200 rounded-lg transition-all",title:"导出 Markdown",children:(0,a.jsx)(L.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:i,className:"p-2 hover:bg-white/10 text-white/70 hover:text-white rounded-lg transition-all",children:(0,a.jsx)(I.A,{className:"w-4 h-4"})})]})]})}),(0,a.jsxs)("div",{className:"p-6 overflow-y-auto max-h-96",children:[(0,a.jsx)("div",{className:"space-y-2",children:t.items.map(e=>{let t=l[e.id]||!1,r=e.indent||0;return e.isHeader?(0,a.jsx)("div",{className:"\n                      mt-4 mb-2 ".concat(r>0?"ml-4":"","\n                    "),children:(0,a.jsx)("h3",{className:"text-white font-semibold text-md border-b border-white/20 pb-1",children:e.text})},e.id):(0,a.jsxs)("div",{className:"\n                    flex items-center gap-3 p-3 rounded-lg transition-all cursor-pointer\n                    hover:bg-white/5 dark:hover:bg-white/10 ".concat(t?"opacity-75":"","\n                  "),onClick:()=>c(e.id),style:{paddingLeft:"".concat(1.5*r+.75,"rem")},children:[(0,a.jsx)("div",{className:"\n                    w-5 h-5 rounded border-2 flex items-center justify-center transition-all\n                    ".concat(t?"bg-green-500 border-green-500":"border-white/30 hover:border-white/50","\n                  "),children:t&&(0,a.jsx)(_.A,{className:"w-3 h-3 text-white"})}),(0,a.jsx)("span",{className:"\n                    text-white transition-all flex-1\n                    ".concat(t?"line-through opacity-60":"","\n                    ").concat(r>0?"text-sm":"","\n                  "),children:e.text})]},e.id)})}),0===t.items.length&&(0,a.jsx)("div",{className:"text-center text-white/50 py-8",children:"暂无清单项目"})]})]})]})}var O=r(5604);function G(e){let{item:t,onClose:r}=e;if(!t)return null;let s=e=>{navigator.clipboard.writeText(e).then(()=>{}).catch(e=>{console.error("复制失败:",e)})};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-md flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-2xl rounded-xl overflow-hidden",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-primary)",borderWidth:"1px",borderStyle:"solid"},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",style:{borderColor:"var(--border-secondary)"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white",children:(0,a.jsx)(v,{icon:t.icon,title:t.title,size:24})}),(0,a.jsx)("h2",{className:"text-lg font-medium",style:{color:"var(--text-primary)"},children:t.title})]}),(0,a.jsx)("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-black/10",style:{color:"var(--text-secondary)"},children:(0,a.jsx)(I.A,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"p-4 border-b",style:{borderColor:"var(--border-secondary)"},children:(0,a.jsx)("p",{style:{color:"var(--text-secondary)"},children:t.description})}),(0,a.jsx)("div",{className:"p-4 max-h-[60vh] overflow-y-auto",children:(0,a.jsx)("ul",{className:"space-y-3",children:t.items.map(e=>(0,a.jsxs)("li",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-black/5 transition-colors",style:{backgroundColor:"var(--bg-secondary)"},children:[(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex-grow flex items-center gap-2",style:{color:"var(--text-primary)"},children:[(0,a.jsx)(g.A,{className:"w-4 h-4 flex-shrink-0",style:{color:"var(--text-tertiary)"}}),(0,a.jsx)("span",{children:e.text})]}),(0,a.jsx)("button",{onClick:()=>s(e.url),className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-black/10",title:"复制链接",style:{color:"var(--text-tertiary)"},children:(0,a.jsx)(O.A,{className:"w-4 h-4"})})]},e.id))})}),(0,a.jsxs)("div",{className:"p-4 border-t flex justify-between",style:{borderColor:"var(--border-secondary)"},children:[(0,a.jsxs)("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["共 ",t.items.length," 个链接"]}),(0,a.jsx)("button",{onClick:()=>{if(!t)return;let e=t.items.map(e=>"".concat(e.text,": ").concat(e.url)).join("\n");navigator.clipboard.writeText(e).then(()=>{alert("所有链接已复制到剪贴板")}).catch(e=>{console.error("复制失败:",e),alert("复制失败，请手动复制")})},className:"px-4 py-2 rounded-lg text-sm",style:{backgroundColor:"var(--bg-hover)",color:"var(--text-primary)"},children:"复制全部链接"})]})]})})}function H(e){let{items:t,selectedTags:r,searchQuery:s,exportTemplate:l,exportItemFormat:n}=e,i=async()=>{let e=t.filter(e=>{let t=!s.trim()||e.title.toLowerCase().includes(s.toLowerCase())||e.description.toLowerCase().includes(s.toLowerCase()),a=0===r.length||r.some(t=>e.tags.includes(t));return t&&a}),a=1===r.length?r[0]:"筛选结果",i=function(e,t,r,a){let s=t?e.filter(e=>e.tags.includes(t)):e,l=a||"- [{title}]({url}) - {description}",n=s.map(e=>{if("sharedlist"===e.type){if(e.items&&e.items.length>0){let t=l.replace("{title}",e.title).replace("{url}","#").replace("{description}",e.description),r=e.items.map(e=>"  - [".concat(e.text,"](").concat(e.url,")")).join("\n");return"".concat(t,"\n").concat(r)}}else if("checklist"!==e.type)return l.replace("{title}",e.title).replace("{url}","url"in e?e.url:"#").replace("{description}",e.description);else if(e.items&&e.items.length>0){let t=l.replace("{title}",e.title).replace("{url}","#").replace("{description}",e.description),r=e.items.map(e=>"  - [".concat(e.completed?"x":" ","] ").concat(e.text)).join("\n");return"".concat(t,"\n").concat(r)}return""}).filter(Boolean).join("\n\n");return t&&r?r.replace("{tag}",t).replace("{items}",n):n}(e,void 0,l,n),c=1===r.length&&l?l.replace("{tag}",a).replace("{items}",i):"# ".concat(a,"\n\n").concat(i);try{await navigator.clipboard.writeText(c),o("已复制到剪贴板")}catch(e){console.error("复制到剪贴板失败:",e),o("复制失败，请手动复制","error")}},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",r=document.createElement("div");r.className="fixed bottom-24 left-1/2 transform -translate-x-1/2 px-4 py-2 rounded-lg text-white text-sm z-50 ".concat("success"===t?"bg-green-500":"bg-red-500"),r.textContent=e,document.body.appendChild(r),setTimeout(()=>{r.classList.add("opacity-0"),r.style.transition="opacity 0.5s ease",setTimeout(()=>document.body.removeChild(r),500)},2e3)};return(0,a.jsx)("div",{className:"fixed bottom-6 right-6 hidden md:block z-30",children:(0,a.jsx)("button",{onClick:i,className:"p-4 rounded-full bg-blue-500/80 hover:bg-blue-500 text-white shadow-lg transition-all hover:scale-105",title:"导出当前筛选结果到剪贴板",children:(0,a.jsx)(L.A,{className:"w-5 h-5"})})})}function P(e){let{siteConfig:t}=e;return(0,s.useEffect)(()=>{if("undefined"!=typeof document&&t.favicon){let e=document.querySelector("link[rel~='icon']");if(e)e.href=t.favicon;else{let e=document.createElement("link");e.rel="icon",e.href=t.favicon,document.head.appendChild(e)}}},[t.favicon]),null}function D(){let[e,t]=(0,s.useState)(null),[r,l]=(0,s.useState)([]),[n,o]=(0,s.useState)(null),[d,h]=(0,s.useState)(null),[m,x]=(0,s.useState)(!0),[p,g]=(0,s.useState)(null),[f,v]=(0,s.useState)(""),[b,j]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{try{x(!0);let e=await i();console.log("加载的配置:",e),console.log("类型分组配置:",e.layout.typeGroups),t(e),l(e.items)}catch(e){g(e instanceof Error?e.message:"配置加载失败"),console.error("配置加载错误:",e)}finally{x(!1)}})()},[]),(0,s.useEffect)(()=>{if(e)return e.items.forEach(e=>{if("service"===e.type){var t;(null==(t=e.healthCheck)?void 0:t.enabled)&&c.startChecking(e.id,e.healthCheck.url||e.url,e.healthCheck.type,e.healthCheck.host,e.healthCheck.port,e.healthCheck.interval)}}),()=>{e.items.forEach(e=>{if("service"===e.type){var t;(null==(t=e.healthCheck)?void 0:t.enabled)&&c.stopChecking(e.id)}})}},[e]);let N=(0,s.useCallback)(t=>{if(!e)return void l(t);let{pinned:r,groups:a}=e.layout,s=[],n=[...t];r.forEach(e=>{let t=n.findIndex(t=>t.id===e);-1!==t&&s.push(n.splice(t,1)[0])}),a.sort((e,t)=>e.priority-t.priority).forEach(e=>{n.filter(t=>e.tags.some(e=>t.tags.includes(e))).forEach(e=>{let t=n.indexOf(e);-1!==t&&s.push(n.splice(t,1)[0])})}),s.push(...n),l(s)},[e]),k=(0,s.useCallback)(e=>{v(e)},[]),C=(0,s.useCallback)(e=>{j(e)},[]);return m?(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 fixed inset-0"}),(0,a.jsxs)("div",{className:"relative z-10 text-white text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg",children:"加载中..."})]})]}):p||!e?(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center",children:[(0,a.jsx)("div",{className:"bg-red-500 fixed inset-0"}),(0,a.jsxs)("div",{className:"relative z-10 text-white text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"配置加载失败"}),(0,a.jsx)("p",{className:"text-lg mb-4",children:p}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-white/20 hover:bg-white/30 px-6 py-3 rounded-lg transition-all",children:"重新加载"})]})]}):(0,a.jsxs)("main",{className:"min-h-screen relative",children:[(0,a.jsx)(P,{siteConfig:e.site}),(0,a.jsx)(u,{config:e.appearance.background}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 relative z-10",children:[(0,a.jsx)(y,{siteConfig:e.site}),(0,a.jsx)("div",{className:"px-6 mb-8",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsx)(w,{items:e.items,config:e,onFilter:N,onSearchChange:k,onTagsChange:C})})}),(0,a.jsx)("div",{className:"px-6 pb-12",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:r.length>0?(0,a.jsx)(A,{items:r,onOpenChecklist:e=>{"checklist"===e.type&&o(e)},onOpenSharedList:e=>{"sharedlist"===e.type&&h(e)},config:e}):(0,a.jsxs)("div",{className:"text-center text-white/60 dark:text-white/70 py-12",children:[(0,a.jsx)("p",{className:"text-lg mb-4",children:"没有找到匹配的项目"}),(0,a.jsx)("p",{className:"text-sm",children:"尝试调整搜索条件或检查配置文件"})]})})})]}),(0,a.jsx)(H,{items:e.items,selectedTags:b,searchQuery:f,exportTemplate:e.export.markdown.template,exportItemFormat:e.export.markdown.item_format}),(0,a.jsx)(z,{item:n,onClose:()=>{o(null)}}),(0,a.jsx)(G,{item:d,onClose:()=>{h(null)}}),e.site.analytics&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("script",{async:!0,src:"https://www.googletagmanager.com/gtag/js?id=".concat(e.site.analytics)}),(0,a.jsx)("script",{dangerouslySetInnerHTML:{__html:"\n                window.dataLayer = window.dataLayer || [];\n                function gtag(){dataLayer.push(arguments);}\n                gtag('js', new Date());\n                gtag('config', '".concat(e.site.analytics,"');\n              ")}})]})]})}},7280:(e,t,r)=>{"use strict";r.d(t,{D:()=>n,ThemeProvider:()=>i});var a=r(5155),s=r(2115);let l=(0,s.createContext)(void 0);function n(){let e=(0,s.useContext)(l);if(!e)throw Error("useTheme must be used within a ThemeProvider");return e}function i(e){let{children:t,defaultTheme:r="light"}=e,[n,i]=(0,s.useState)(r),[o,c]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{try{let e=localStorage.getItem("homepage-theme");e&&("light"===e||"dark"===e)&&(console.log("ThemeProvider: 从localStorage加载主题",e),i(e)),c(!0)}catch(e){console.error("ThemeProvider: 初始化主题时出错",e)}},[]),(0,s.useEffect)(()=>{if(o)try{localStorage.setItem("homepage-theme",n),console.log("ThemeProvider: 主题已保存为",n)}catch(e){console.error("ThemeProvider: 保存主题时出错",e)}},[n,o]),(0,a.jsx)(l.Provider,{value:{theme:n,toggleTheme:()=>{console.log("ThemeProvider: 手动切换主题","light"===n?"dark":"light"),i(e=>"light"===e?"dark":"light")}},children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2,441,684,358],()=>t(2665)),_N_E=e.O()}]);